{% extends 'panel/base.html' %}
{% load static %}
{% load i18n %}

{% block head %}

<link rel="stylesheet" href="{% static '' %}assets/modules/select2/dist/css/select2.min.css">
<link rel="stylesheet" href="{% static '' %}assets/modules/jquery-selectric/selectric.css">
<link rel="stylesheet" href="{% static '' %}assets/modules/bootstrap-timepicker/css/bootstrap-timepicker.min.css">

<!-- CSS Libraries -->

<link rel="stylesheet" href="{% static '' %}assets/modules/datatables/Select-1.2.4/css/select.bootstrap4.min.css">

{% endblock %}
{% block body %}

<div class="main-content">
    <section class="section">
        <div class="section-header">
            <h1>CONGES de {{listing.name}} {{listing.prenom}} </h1>
            <div class="section-header-breadcrumb">
                <div class="breadcrumb-item active"><a href="#">Dashboard</a></div>
                <div class="breadcrumb-item"><a href="#">Modules</a></div>
                <div class="breadcrumb-item">DataTables</div>
            </div>
        </div>

        {% if messages %}
        {% for message in messages%}
        <div class="alert alert-{{message.tags}}">{{message}}.</div>
        {%endfor%}
        {% endif %}

        <div class="section-body">
{% include 'panel/background_image_card.html' %}

            <div class="row">

                <div class="col-12 col-12">

                    {% for showconge in showconges %}
                    <div class="card">

                        <div class="card-body">
                            <div class="card">
                                <div class="card-header">


                                    <h4> Statut :
                                        {% if showconge.etatconges == 'NEW' %}
                                        <span class="badge badge-primary">NOUVELLE DEMANDE</span>
                                        {% elif showconge.etatconges == 'ATT' %}
                                        <span class="badge badge-warning">EN ATTENTE</span>
                                        {% elif showconge.etatconges == 'VAL' %}
                                        <span class="badge badge-success">VALIDÉE</span>
                                        {% elif showconge.etatconges == 'REJ' %}
                                        <span class="badge badge-danger">REJETÉ</span>
                                        {% endif %}
                                    </h4>
                                    <div class="card-header-action">
                                        <a data-collapse="#mycard-collapse-{{showconge.id}}"
                                           class="btn btn-icon btn-info"
                                           href="#"><i class="fas fa-minus"></i></a>
                                    </div> &nbsp;
                                       {% if showconge.etatconges in 'NEW,ATT' %}
                                    <div class="dropdown">
                                        <a href="#" data-toggle="dropdown" class="btn btn-warning dropdown-toggle">Options</a>
                                        <div class="dropdown-menu">
                                            {% if showconge.etatconges == 'NEW' %}
                                            <a href="{% url 'soumettre_conges' showconge.id %}" class="dropdown-item has-icon text-success"><i class="fas fa-check"></i>Soumettre</a>
                                            <a href="{% url 'conges_edit' showconge.id %}" class="dropdown-item has-icon"><i class="far fa-edit"></i>Modifier</a>
                                            <a href="{% url 'conges_del' showconge.id %}" class="dropdown-item has-icon text-danger"><i class="far fa-trash-alt"></i>Supprimer</a>
                                            {% elif showconge.etatconges == 'ATT' %}
                                            <a href="{% url 'conges_validate' showconge.id %}" class="dropdown-item has-icon text-success"><i class="fas fa-calendar-check"></i>Accorder</a>
                                            <a href="{% url 'conges_cancel' showconge.id %}" class="dropdown-item has-icon text-danger"><i class="fas fa-calendar-times"></i>Réfuser</a>
                                            {% else %}
                                            {% endif %}

                                        </div>
                                    </div>
                                        {% endif %}
                                </div>
                                <div class="collapse show" id="mycard-collapse-{{showconge.id}}">
                                    <div class="card-body">
                                        <p>
                                            Date de debut :
                                            {% language 'fr' %}
                                                {{ showconge.datedebut|date:'d E Y' }}
                                            {% endlanguage %}

                                        </p> <br>
                                        <p>
                                            Date de debut :
                                            {% language 'fr' %}
                                                {{ showconge.datefin|date:'d E Y' }}
                                            {% endlanguage %}

                                        </p><br>
                                        <p>
                                            Durée du Congé : {{ showconge.calculduree }}
                                        </p>
                                    </div>

                                    <div class="card-footer">
                                        <p>Description :</p>

                                        <blockquote class="blockquote">

                                            <span class="mb-0" style="font-family: Verdana, Arial, Tahoma, Serif;"> {{ showconge.description }} </span>

                                        </blockquote>

                                    </div>

                                </div>
                            </div>

                        </div>

                    </div>

                    {% empty %}
                        <div class="display-2 text-muted text-center">
                            AUCUN CONGÉ ENREGISTRÉ
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </section>
</div>
{% endblock %}

{%block foot%}


<script src="{% static '' %}assets/modules/jquery-ui/jquery-ui.min.js"></script>

<!-- Page Specific JS File -->

<script src="{% static '' %}assets/modules/select2/dist/js/select2.full.min.js"></script>

<!--<script src="{% static '' %}assets/modules/cleave-js/dist/cleave.min.js"></script>-->
<script src="{% static '' %}js/page/forms-advanced-forms.js"></script>

<!-- JS Libraies -->


<!-- Page Specific JS File -->

{%endblock%}